@using EPiServer.Core
@using EPiServer.Web.Routing
@model PizzeriaEpiserverSite.Models.ViewModels.BlogPageViewModel

@*@{
    Layout = "~/Views/Shared/_LeftNavigation.cshtml";
}*@

<h1>@Html.PropertyFor(x => x.CurrentPage.PageName)</h1>
<p>@Html.PropertyFor(x => x.CurrentPage.StartPublish.Value)</p>
@if (Html.PropertyFor(x => x.CurrentPage.PageImage) != null)
{
    <div class="blogImage2">@Html.PropertyFor(x => x.CurrentPage.PageImage)</div>
}
<p class="introduction">
    @Html.PropertyFor(m => m.CurrentPage.MetaDescription)
</p>
<div class="row">
    <div class="col-md-12">
        @Html.PropertyFor(x => x.CurrentPage.MainBody)
        @Html.PropertyFor(x => x.CurrentPage.MainListing)
    </div>
</div>

<br />

@*@if (!ContentReference.IsNullOrEmpty(Model.CurrentPage.CommentFolder))*@
@if (Model.CommentFolderIsSet)
{
    <h3>@Html.Translate("/postedcomment/listheading")</h3>
    foreach (var c in Model.CommentList)
    {
        ContentReference currentCommentRef = ((IContent)c).ContentLink;
        <div class="date">
            @Html.ActionLink(
           Html.Translate("/postedcomment/reportcommentlink"),
           "ReportComment",
           new { commentReference = currentCommentRef })
        </div>

        Html.RenderPartial("PostedComment", c);
    }

    if (Model.HasCommentPublishAccess)
    {
        using (Html.BeginForm("Create", null, FormMethod.Post))
        {
            <fieldset>
                <legend>@Html.Translate("/postedcomment/form/fieldsetlegend")</legend>
                @Html.Label(@Html.Translate("/postedcomment/form/commentatornamelabel"))
                @Html.TextBox("CommentatorName")
                @Html.Label(@Html.Translate("/postedcomment/form/commenttextlabel"))
                @Html.TextArea("Text")
                <input type="submit" value=@Html.Translate("/postedcomment/form/submitbutton") />
            </fieldset>
        }
    }
}